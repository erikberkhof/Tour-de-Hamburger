<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="UTF-8" />
  <title>Tour de Hamburger</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Leaflet CSS (kaart) -->
  <link
    rel="stylesheet"
    href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
    crossorigin=""
  />

  <style>
    :root {
      color-scheme: dark;
    }

    html, body {
      height: 100%;
      margin: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
        sans-serif;
      background: #0b0b0b;
      color: #fff;
    }

    body {
      display: flex;
      flex-direction: column;
    }

    #app {
      display: flex;
      flex-direction: column;
      min-height: 100vh;
    }

    header {
      padding: 16px 18px 10px;
      background: radial-gradient(circle at top left, #ff8a3c33, #000);
      border-bottom: 1px solid #333;
    }

    header h1 {
      margin: 0 0 4px;
      font-size: 1.8rem;
      letter-spacing: 0.03em;
      text-transform: uppercase;
    }

    header p {
      margin: 0;
      font-size: 0.95rem;
      color: #ddd;
    }

    main {
      flex: 1;
      padding: 12px 18px 30px;
      max-width: 1100px;
      width: 100%;
      margin: 0 auto;
    }

    .intro {
      margin-bottom: 16px;
      font-size: 0.98rem;
      color: #ddd;
    }

    .layout {
      display: grid;
      grid-template-columns: minmax(0, 2.1fr) minmax(0, 1.3fr);
      gap: 18px;
      align-items: flex-start;
      margin-bottom: 24px;
    }

    #map {
      width: 100%;
      height: 360px;
      border-radius: 14px;
      overflow: hidden;
      box-shadow: 0 10px 30px #000c;
      border: 1px solid #333;
    }

    .card {
      background: #121212;
      border-radius: 14px;
      padding: 14px 14px 10px;
      border: 1px solid #333;
      box-shadow: 0 8px 20px #0008;
    }

    .card h2 {
      margin-top: 0;
      margin-bottom: 6px;
      font-size: 1.1rem;
    }

    .spots {
      list-style: none;
      padding: 0;
      margin: 8px 0 4px;
      font-size: 0.92rem;
    }

    .spots li {
      margin-bottom: 8px;
      padding: 8px;
      border-radius: 8px;
      background: #1a1a1a;
    }

    .spots strong {
      display: inline-block;
      margin-bottom: 2px;
    }

    .spots a {
      color: #ffb24a;
      text-decoration: none;
    }

    .spots a:hover {
      text-decoration: underline;
    }

    .hint {
      font-size: 0.78rem;
      color: #aaa;
      margin-top: 6px;
    }

    /* DATUMPRIKKER */

    .date-picker-section {
      margin-top: 10px;
      padding: 16px 14px 18px;
      background: #101010;
      color: #fff;
      border-radius: 14px;
      border: 1px solid #333;
      box-shadow: 0 8px 20px #0008;
    }

    .date-picker-section h2 {
      margin: 0 0 6px;
      font-size: 1.2rem;
    }

    .date-picker-info {
      margin: 0 0 14px;
      font-size: 0.9rem;
      color: #ccc;
    }

    .date-picker-info span {
      display: inline-block;
      margin-right: 10px;
    }

    .legend-dot {
      display: inline-block;
      width: 10px;
      height: 10px;
      border-radius: 50%;
      margin-right: 4px;
      vertical-align: middle;
    }

    .legend-me {
      background: #2ecc71;
    }

    .legend-overlap {
      background: #f1c40f;
    }

    .calendar-wrap {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
    }

    .calendar {
      display: inline-block;
      padding: 10px;
      background: #181818;
      border-radius: 10px;
      border: 1px solid #333;
    }

    .calendar h3 {
      text-align: center;
      margin: 0 0 8px;
      font-size: 0.98rem;
    }

    .grid {
      display: grid;
      grid-template-columns: repeat(7, 28px);
      gap: 4px;
    }

    .weekday {
      font-size: 0.7rem;
      text-align: center;
      color: #999;
    }

    .day {
      width: 28px;
      height: 28px;
      background: #333;
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 4px;
      cursor: pointer;
      user-select: none;
      font-size: 0.75rem;
    }

    .day.available {
      background: #2ecc71;
      color: #000;
    }

    .day.overlap {
      background: #f1c40f;
      color: #000;
    }

    footer {
      padding: 10px 18px 16px;
      font-size: 0.8rem;
      color: #777;
      text-align: center;
      border-top: 1px solid #222;
      margin-top: auto;
    }

    @media (max-width: 800px) {
      .layout {
        grid-template-columns: 1fr;
      }

      #map {
        height: 300px;
      }

      .grid {
        grid-template-columns: repeat(7, 26px);
      }

      .day {
        width: 26px;
        height: 26px;
      }
    }
  </style>
</head>
<body>
<div id="app">
  <header>
    <h1>Tour de Hamburger</h1>
    <p>Drie burgerstops in Amsterdam &ndash; plus een datumprikker voor begin&nbsp;2026.</p>
  </header>

  <main>
    <p class="intro">
      Plan je eigen <strong>Tour de Hamburger</strong>: kies jullie favoriete burgerspots op de kaart
      en prik samen een datum in de eerste drie maanden van&nbsp;2026.
    </p>

    <section class="layout">
      <div id="map"></div>

      <aside class="card">
        <h2>De stops</h2>
        <ul class="spots">
          <li>
            <strong>Bon Burger</strong><br />
            Jacob van Lennepkade, Amsterdam-West<br />
            <a href="https://www.instagram.com/bonburgerbar/" target="_blank" rel="noopener">
              Website / Instagram
            </a>
          </li>
          <li>
            <strong>Paindemie</strong><br />
            Kinkerstraat 122, Amsterdam-West<br />
            <a href="https://www.paindemie-amsterdam.com/" target="_blank" rel="noopener">
              Website
            </a>
          </li>
          <li>
            <strong>The Beef Chief (Noord)</strong><br />
            Beitelkade, Amsterdam-Noord<br />
            <a href="https://www.thebeefchief.com/" target="_blank" rel="noopener">
              Website
            </a>
          </li>
        </ul>
        <p class="hint">
          Tip: zoom en sleep op de kaart om de route te bekijken. Klik op een marker voor info.
        </p>
      </aside>
    </section>

    <section class="date-picker-section">
      <h2>Datumprikker &ndash; januari t/m maart 2026</h2>
      <p class="date-picker-info">
        <span><span class="legend-dot legend-me"></span>Groen = jij kunt</span>
        <span><span class="legend-dot legend-overlap"></span>Geel = jullie allebei</span><br />
        Klik op een dag om jouw beschikbaarheid te togglen. Rechtsklik (of lang ingedrukt houden
        op mobiel met contextmenu) om de ander te simuleren.
      </p>

      <div class="calendar-wrap" id="datepickers"></div>
    </section>
  </main>

  <footer>
    Tour de Hamburger &middot; Gemaakt met liefde, burgers en een beetje code.
  </footer>
</div>

<!-- Leaflet JS -->
<script
  src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
  integrity="sha256-o9N1j7kGStG3eus9iM6RaSPoaqe0MzdEar3p3S1x04Q="
  crossorigin=""
></script>

<script>
  // ==============================
  // KAART - LEAFLET
  // ==============================
  const map = L.map("map").setView([52.373, 4.89], 12.4);

  L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", {
    maxZoom: 19,
    attribution: '&copy; OpenStreetMap-bijdragers'
  }).addTo(map);

  // Ongeveer posities van de drie zaken (alleen voor visueel gebruik)
  const spots = [
    {
      name: "Bon Burger",
      coords: [52.36315, 4.86206], // Jacob van Lennepkade
      url: "https://www.instagram.com/bonburgerbar/"
    },
    {
      name: "Paindemie",
      coords: [52.3665, 4.8640],   // Kinkerstraat-omgeving (globaal)
      url: "https://www.paindemie-amsterdam.com/"
    },
    {
      name: "The Beef Chief (Noord)",
      coords: [52.3845, 4.9280],   // Beitelkade-omgeving (globaal)
      url: "https://www.thebeefchief.com/"
    }
  ];

  spots.forEach((s) => {
    const marker = L.marker(s.coords).addTo(map);
    marker.bindPopup(
      `<strong>${s.name}</strong><br><a href="${s.url}" target="_blank" rel="noopener">Website openen</a>`
    );
  });

  // ==============================
  // DATUMPRIKKER 2026
  // ==============================

  // Configuratie: maanden jan–mrt 2026
  // startDay = dag van de week waarvan we beginnen (0 = zondag, 1 = maandag, etc.)
  // Hier gebruiken we (0 = ma, 6 = zo) dus we corrigeren even handmatig.
  const months = [
    { name: "Januari 2026", days: 31, startDay: 3 }, // 1 jan 2026 = donderdag → index 3 als maandag=0
    { name: "Februari 2026", days: 28, startDay: 6 }, // 1 feb 2026 = zondag → index 6
    { name: "Maart 2026", days: 31, startDay: 0 } // 1 mrt 2026 = maandag → index 0
  ];

  const weekdaysShort = ["M", "D", "W", "D", "V", "Z", "Z"];

  // localStorage keys
  const USER_KEY = "tourdehamburger_availability_me";
  const OTHER_KEY = "tourdehamburger_availability_other";

  let availabilityUser = JSON.parse(localStorage.getItem(USER_KEY)) || {};
  let availabilityOther = JSON.parse(localStorage.getItem(OTHER_KEY)) || {};

  const calendarContainer = document.getElementById("datepickers");

  function renderCalendars() {
    calendarContainer.innerHTML = "";

    months.forEach((m, mi) => {
      const cal = document.createElement("div");
      cal.className = "calendar";

      const title = document.createElement("h3");
      title.innerText = m.name;
      cal.appendChild(title);

      const grid = document.createElement("div");
      grid.className = "grid";

      // Weekdagen kop
      weekdaysShort.forEach((wd) => {
        const w = document.createElement("div");
        w.className = "weekday";
        w.innerText = wd;
        grid.appendChild(w);
      });

      // Lege vakjes vóór de 1e dag
      for (let i = 0; i < m.startDay; i++) {
        const empty = document.createElement("div");
        grid.appendChild(empty);
      }

      // De dagen
      for (let d = 1; d <= m.days; d++) {
        const key = `${2026}-${String(mi + 1).padStart(2, "0")}-${String(d).padStart(2, "0")}`;
        const div = document.createElement("div");
        div.className = "day";
        div.innerText = d;

        const userHas = availabilityUser[key];
        const otherHas = availabilityOther[key];

        if (userHas && otherHas) {
          div.classList.add("overlap");
        } else if (userHas) {
          div.classList.add("available");
        }

        // Linkermuisklik = jij
        div.onclick = () => {
          if (availabilityUser[key]) {
            delete availabilityUser[key];
          } else {
            availabilityUser[key] = true;
          }
          localStorage.setItem(USER_KEY, JSON.stringify(availabilityUser));
          renderCalendars();
        };

        // Rechtsklik = de ander (simulatie)
        div.oncontextmenu = (e) => {
          e.preventDefault();
          if (availabilityOther[key]) {
            delete availabilityOther[key];
          } else {
            availabilityOther[key] = true;
          }
          localStorage.setItem(OTHER_KEY, JSON.stringify(availabilityOther));
          renderCalendars();
        };

        grid.appendChild(div);
      }

      cal.appendChild(grid);
      calendarContainer.appendChild(cal);
    });
  }

  renderCalendars();
</script>
</body>
</html>
